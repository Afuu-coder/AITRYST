"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[743],{743:function(t,a,e){let r,n;e.d(a,{BackendProvider:function(){return v},h:function(){return B}});var c=e(7437),i=e(2265),o=e(738),s=e(2148),d=e(5978),u=e(6485),l=e(5566);let h={apiKey:l.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyA3_K9r1SdPSzYgQJ7cjeRHVibLhZOfG4w",authDomain:l.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"aitryst.firebaseapp.com",projectId:l.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"aitryst",storageBucket:l.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"aitryst.firebasestorage.app",messagingSenderId:l.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"1014058874310",appId:l.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:1014058874310:web:442236f319eb8a45d5eec7",measurementId:l.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-FF1NJ0EWJX"};try{r=(0,o.C6)().length?(0,o.Mq)():(0,o.ZF)(h),(0,s.v0)(r),n=(0,d.ad)(r),(0,u.cF)(r)}catch(t){r=null,n=null}let w=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";try{let e=await fetch("/api/vertex-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t,language:a})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();return{headline:r.headline||"AI-Generated Content",description:r.description||"This content was generated by AI.",socialPost:r.socialPost||"Check out our handcrafted product!",whatsappMessage:r.whatsappMessage||"Check out our latest handcrafted product!",emailSubject:r.emailSubject||"Special Offer for You",emailBody:r.emailBody||"We have a special offer for you!",offer:r.offer||"Special 25% OFF on all products"}}catch(t){if("hi"===a)return{headline:"एआई-जनित सामग्री",description:"यह सामग्री हिंदी में एआई द्वारा उत्पन्न की गई है।",socialPost:"हमारे हस्तशिल्प उत्पाद के बारे में! \uD83C\uDFFA #हस्तशिल्प #भारत",whatsappMessage:"हमारे नवीनतम हस्तशिल्प उत्पाद की जाँच करें!",emailSubject:"आपके लिए विशेष प्रस्ताव",emailBody:"हमारे पास आपके लिए एक विशेष प्रस्ताव है!",offer:"सभी उत्पादों पर विशेष 25% छूट"};return{headline:"AI-Generated Content",description:"This content was generated by AI in English.",socialPost:"Check out our handcrafted product! \uD83C\uDFFA #Craftsmanship #India",whatsappMessage:"Check out our latest handcrafted product!",emailSubject:"Special Offer for You",emailBody:"We have a special offer for you!",offer:"Special 25% OFF on all products"}}},p=async(t,a)=>{try{let e=await fetch("/api/enhance-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:t,enhancementOptions:a})});if(!e.ok)throw await e.text(),Error("HTTP error! status: ".concat(e.status));return(await e.json()).enhancedImageUrl||t}catch(t){throw t}},y=async t=>{try{if(!n)return{id:"mock-"+Date.now(),...t,createdAt:new Date,updatedAt:new Date};let a={...t,createdAt:new Date,updatedAt:new Date};return{id:(await (0,d.ET)((0,d.hJ)(n,"products"),a)).id,...a}}catch(t){throw t}},f=async t=>{try{if(!n)return[{id:"mock-1",name:"Sample Handcrafted Pottery",description:"Beautiful handcrafted pottery with traditional patterns",price:1500,artisanId:t,imageUrl:"/enhanced-pottery-vase-with-better-lighting-and-bac.jpg",category:"pottery",createdAt:new Date,updatedAt:new Date}];let a=(0,d.IO)((0,d.hJ)(n,"products"),(0,d.ar)("artisanId","==",t),(0,d.Xo)("createdAt","desc"));return(await (0,d.PL)(a)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){throw t}},E=async(t,a)=>{try{let e={...a,updatedAt:new Date},r=(0,d.JU)(n,"products",t);return await (0,d.r7)(r,e),{id:t,...e}}catch(t){throw t}},g=async t=>{try{return await (0,d.oe)((0,d.JU)(n,"products",t)),!0}catch(t){throw t}},m=async t=>{try{let a={...t,createdAt:new Date,updatedAt:new Date};return{id:(await (0,d.ET)((0,d.hJ)(n,"artisans"),a)).id,...a}}catch(t){throw t}},A=async t=>{try{let a=(0,d.JU)(n,"artisans",t),e=await (0,d.QT)(a);if(e.exists())return{id:e.id,...e.data()};throw Error("Artisan not found")}catch(t){throw t}},I=async(t,a)=>{try{let e={...a,updatedAt:new Date},r=(0,d.JU)(n,"artisans",t);return await (0,d.r7)(r,e),{id:t,...e}}catch(t){throw t}},P=async t=>{try{let a={...t,createdAt:new Date,updatedAt:new Date};return{id:(await (0,d.ET)((0,d.hJ)(n,"campaigns"),a)).id,...a}}catch(t){throw t}},S=async t=>{try{let a=(0,d.IO)((0,d.hJ)(n,"campaigns"),(0,d.ar)("artisanId","==",t),(0,d.Xo)("createdAt","desc"));return(await (0,d.PL)(a)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){throw t}},T=async(t,a)=>{try{return URL.createObjectURL(t)}catch(t){if(t instanceof Error)throw Error("Upload failed: ".concat(t.message));throw Error("Upload failed: Unknown error occurred")}},C=async(t,a,e)=>{try{let r=await fetch("/api/calculate-pricing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({materialCost:t,hoursWorked:a,productType:e})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(o){let r=150*a,n=.3*t,c={pottery:1.2,textiles:1.5,jewelry:2,woodwork:1.3,metalwork:1.4,paintings:1.8,default:1.2},i=Math.round((t+r+n)*(c[e]||c.default));return{materialCost:t,laborCost:r,overhead:n,suggestedPrice:i,platformPrices:{local:i,online:Math.round(1.2*i),premium:Math.round(1.5*i),wholesale:Math.round(.7*i)}}}},_=async t=>{try{let a=await fetch("/api/generate-qr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return(await a.json()).qrCodeUrl}catch(a){return"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(t))}},b=()=>{let[t,a]=(0,i.useState)([]),[e,r]=(0,i.useState)(null),[n,c]=(0,i.useState)([]),[o,s]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),l=async t=>{s(!0),u(null);try{return await t()}catch(t){throw u(t instanceof Error?t.message:"An unknown error occurred"),t}finally{s(!1)}};return{products:t,fetchProducts:async t=>{await l(async()=>{a(await f(t))})},createNewProduct:async t=>l(async()=>{let e=await y(t);return a(t=>[e,...t]),e}),updateExistingProduct:async(t,e)=>l(async()=>{let r=await E(t,e);return a(a=>a.map(a=>a.id===t?r:a)),r}),deleteExistingProduct:async t=>l(async()=>{let e=await g(t);return e&&a(a=>a.filter(a=>a.id!==t)),e}),artisan:e,fetchArtisan:async t=>{await l(async()=>{r(await A(t))})},createNewArtisan:async t=>l(async()=>{let a=await m(t);return r(a),a}),updateExistingArtisan:async(t,a)=>l(async()=>{let e=await I(t,a);return r(e),e}),campaigns:n,fetchCampaigns:async t=>{await l(async()=>{c(await S(t))})},createNewCampaign:async t=>l(async()=>{let a=await P(t);return c(t=>[a,...t]),a}),uploadImageFile:async(t,a)=>l(async()=>{try{return await T(t,a)}catch(t){throw t}}),generateContent:async(t,a)=>l(async()=>await w(t,a)),transcribeAudioFile:async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hi-IN";return l(async()=>{try{let e=new FormData;e.append("audio",t,"recording.webm"),e.append("language",a);let r=await fetch("/api/transcribe-audio",{method:"POST",body:e});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));return(await r.json()).transcription}catch(t){throw t}})},enhanceImageFile:async(t,a)=>l(async()=>await p(t,a)),calculateProductPricing:async(t,a,e)=>l(async()=>await C(t,a,e)),generateProductQRCode:async t=>l(async()=>await _(t)),loading:o,error:d}},D=(0,i.createContext)(void 0),v=t=>{let{children:a}=t,e=b();return(0,c.jsx)(D.Provider,{value:e,children:a})},B=()=>{let t=(0,i.useContext)(D);if(void 0===t)throw Error("useBackendContext must be used within a BackendProvider");return t}}}]);